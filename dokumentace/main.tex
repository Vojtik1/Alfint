\documentclass[12pt, a4paper]{report}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[czech]{babel}
\usepackage{graphicx}
\usepackage{lmodern}
\usepackage{tikz}

%% Proměnné
\newcommand\obor{INFORMAČNÍ TECHNOLOGIE}
\newcommand\kodOboru{18-20-M/01}
\newcommand\zamereni{se zaměřením na počítačové sítě a programování}
\newcommand\skola{Střední škola průmyslová a umělecká, Opava}
\newcommand\trida{IT4}
\newcommand\jmenoAutora{Vojtěch Šíma}
\newcommand\skolniRok{2024/25}
\newcommand\datumOdevzdani{31. 12. 2024}
\newcommand\nazevPrace{Alfint - Aplikace pro zpětné testování akcií}

\title{\nazevPrace}
\author{\jmenoAutora}
\date{\datumOdevzdani}

\usepackage[top=2.5cm, bottom=2.5cm, left=3.5cm, right=1.5cm]{geometry} %% nastaví okraje, left -- vnitřní okraj, right -- vnější okraj

\usepackage[czech]{babel} %% balík babel pro sazbu v češtině
\usepackage[utf8]{inputenc} %% balíky pro kódování textu
\usepackage[T1]{fontenc}
\usepackage{cmap} %% balíček zajišťující, že vytvořené PDF bude prohledávatelné a kopírovatelné
\usepackage{lmodern}  % Přidáno pro lepší podporu českých znaků

\usepackage{graphicx} %% balík pro vkládání obrázků

\usepackage{subcaption} %% balíček pro vkládání podobrázků

\usepackage{hyperref} %% balíček, který v PDF vytváří odkazy

\linespread{1.25} %% řádkování
\setlength{\parskip}{0.5em} %% odsazení mezi odstavci


\usepackage[pagestyles]{titlesec} %% balíček pro úpravu stylu kapitol a sekcí

% Nastavení formátování nadpisů
\titleformat{\chapter}[hang]
  {\rmfamily\bfseries\Large}  % Zmenšeno z \LARGE na \Large
  {\thechapter}
  {1em}
  {\MakeUppercase}

\titleformat{\section}[hang]
  {\rmfamily\bfseries\large}  % Zmenšeno z \Large na \large
  {\thesection}
  {1em}
  {}

\titleformat{\subsection}[hang]
  {\rmfamily\bfseries\normalsize}  % Zmenšeno z \large na \normalsize
  {\thesubsection}
  {1em}
  {}

% Nastavení mezer před a za nadpisy
\setlength{\parindent}{0pt}
\titlespacing*{\chapter}{0pt}{-30pt}{8pt}  % Zmenšeno z 20pt na 8pt
\titlespacing*{\section}{0pt}{12pt}{4pt}   % Zmenšeno z 20pt/10pt na 12pt/4pt
\titlespacing*{\subsection}{0pt}{12pt}{4pt} % Zmenšeno z 20pt/10pt na 12pt/4pt

% Nastavení formátování pro nečíslované nadpisy
\titleformat{name=\chapter,numberless}[hang]
  {\rmfamily\bfseries\Large}
  {}
  {0pt}
  {\MakeUppercase}

\titleformat{name=\section,numberless}[hang]
  {\rmfamily\bfseries\large}  % Zmenšeno z \Large na \large
  {}
  {0pt}
  {}

% Nastavení mezer pro nečíslované nadpisy
\titlespacing*{name=\chapter,numberless}{0pt}{0pt}{8pt}  % Změněno z -30pt na 0pt pro první mezeru
\titlespacing*{name=\section,numberless}{0pt}{12pt}{4pt}   % Zmenšeno z 15pt/5pt na 12pt/4pt

% Nastavení fontu pro obsah
\renewcommand{\cfttoctitlefont}{\rmfamily\LARGE\bfseries}
\renewcommand{\cftchapfont}{\rmfamily\bfseries}
\renewcommand{\cftsecfont}{\rmfamily}
\renewcommand{\cftsubsecfont}{\rmfamily}

% Nastavení číslování pro obsah
\renewcommand{\cftchappresnum}{\rmfamily\bfseries}
\renewcommand{\cftsecpresnum}{\rmfamily}
\renewcommand{\cftsubsecpresnum}{\rmfamily}

\usepackage{tocloft} % Balíček pro přizpůsobení vzhledu obsahu
\setlength{\cftbeforechapskip}{10pt}  % Větší rozestup pro kapitoly
\setlength{\cftbeforesecskip}{3pt}   % Menší rozestup pro sekce

% Nastavení odsazení a formátování obsahu
\cftsetindents{chapter}{0em}{2.5em}
\cftsetindents{section}{2.5em}{3em}
\cftsetindents{subsection}{5.5em}{3.7em}
\renewcommand{\cftdotsep}{2} % Hustota teček
\renewcommand{\cftchapleader}{\cftdotfill{\cftdotsep}} % Tečky i pro kapitoly

\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0.025pt}

\usepackage{booktabs}

\usepackage{url}

%% Balíčky co se můžou hodit :) 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{pdfpages} %% Balíček umožňující vkládat stránky z PDF souborů, 

\usepackage{upgreek} %% Balíček pro sazbu stojatých řeckých písmen, třeba u jednotky mikrometr. Například stojaté mí: \upmu, stojaté pí: \uppi

\usepackage{amsmath}    %% Balíčky amsmath a amsfonts 
\usepackage{amsfonts}   %% pro sazbu matematických symbolů
\usepackage{esint}     %% pro sazbu různých integrálů (např \oiint)
\usepackage{mathrsfs}
\usepackage{helvet} % Helvet font
\usepackage{mathptmx} % Times New Roman
\usepackage{Oswald} % Oswald font


%% makra pro sazbu matematiky
\newcommand{\dif}{\mathrm{d}} %% makro pro sazbu diferenciálu, místo toho
%% abych musel psát '\mathrm{d}' mi stačí napsat '\dif' což je mnohem 
%% kratší a mohu si tak usnadnit práci

\usepackage{listings}
\usepackage{xcolor}

\renewcommand{\lstlistingname}{Kód}% Listing -> Algorithm
\renewcommand{\lstlistlistingname}{Seznam programových kódů}% List of Listings -> List of Algorithms

%% Definice 
\lstdefinelanguage{JavaScript}{
	morekeywords=[1]{break, continue, delete, else, for, function, if, in,
		new, return, this, typeof, var, void, while, with},
	% Literals, primitive types, and reference types.
	morekeywords=[2]{false, null, true, boolean, number, undefined,
		Array, Boolean, Date, Math, Number, String, Object},
	% Built-ins.
	morekeywords=[3]{eval, parseInt, parseFloat, escape, unescape},
	sensitive,
	morecomment=[s]{/*}{*/},
	morecomment=[l]//,
	morecomment=[s]{/**}{*/}, % JavaDoc style comments
	morestring=[b]',
	morestring=[b]"
}[keywords, comments, strings]


\lstdefinelanguage[ECMAScript2015]{JavaScript}[]{JavaScript}{
	morekeywords=[1]{await, async, case, catch, class, const, default, do,
		enum, export, extends, finally, from, implements, import, instanceof,
		let, static, super, switch, throw, try},
	morestring=[b]` % Interpolation strings.
}

\lstalias[]{ES6}[ECMAScript2015]{JavaScript}

% Nastavení barev
% Requires package: color.
\definecolor{mediumgray}{rgb}{0.3, 0.4, 0.4}
\definecolor{mediumblue}{rgb}{0.0, 0.0, 0.8}
\definecolor{forestgreen}{rgb}{0.13, 0.55, 0.13}
\definecolor{darkviolet}{rgb}{0.58, 0.0, 0.83}
\definecolor{royalblue}{rgb}{0.25, 0.41, 0.88}
\definecolor{crimson}{rgb}{0.86, 0.8, 0.24}

% Nastavení pro Python
\lstdefinestyle{Python}{
	language=Python,
	backgroundcolor=\color{white},
	basicstyle=\ttfamily,
	breakatwhitespace=false,
	breaklines=false,
	captionpos=b,
	columns=fullflexible,
	commentstyle=\color{mediumgray}\upshape,
	emph={},
	emphstyle=\color{crimson},
	extendedchars=true,  % requires inputenc
	fontadjust=true,
	frame=single,
	identifierstyle=\color{black},
	keepspaces=true,
	keywordstyle=\color{mediumblue},
	keywordstyle={[2]\color{darkviolet}},
	keywordstyle={[3]\color{royalblue}},
	literate=%
	{á}{{\'a}}1 {č}{{\v{c}}}1 {ď}{{\v{d}}}1 {é}{{\'e}}1 {ě}{{\v{e}}}1
	{í}{{\'i}}1 {ň}{{\v{n}}}1 {ó}{{\'o}}1 {ř}{{\v{r}}}1 {š}{{\v{s}}}1
	{ť}{{\v{t}}}1 {ú}{{\'u}}1 {ů}{{\r{u}}}1 {ý}{{\'y}}1 {ž}{{\v{z}}}1,		
	numbers=left,
	numbersep=5pt,
	numberstyle=\tiny\color{black},
	rulecolor=\color{black},
	showlines=true,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	stringstyle=\color{forestgreen},
	tabsize=2,
	title=\lstname,
	upquote=true  % requires textcomp	
}


\lstdefinestyle{JSES6Base}{
	backgroundcolor=\color{white},
	basicstyle=\ttfamily,
	breakatwhitespace=false,
	breaklines=false,
	captionpos=b,
	columns=fullflexible,
	commentstyle=\color{mediumgray}\upshape,
	emph={},
	emphstyle=\color{crimson},
	extendedchars=true,  % requires inputenc
	fontadjust=true,
	frame=single,
	identifierstyle=\color{black},
	keepspaces=true,
	keywordstyle=\color{mediumblue},
	keywordstyle={[2]\color{darkviolet}},
	keywordstyle={[3]\color{royalblue}},
 literate=%
{á}{{\'a}}1 {č}{{\v{c}}}1 {ď}{{\v{d}}}1 {é}{{\'e}}1 {ě}{{\v{e}}}1
{í}{{\'i}}1 {ň}{{\v{n}}}1 {ó}{{\'o}}1 {ř}{{\v{r}}}1 {š}{{\v{s}}}1
{ť}{{\v{t}}}1 {ú}{{\'u}}1 {ů}{{\r{u}}}1 {ý}{{\'y}}1 {ž}{{\v{z}}}1,		
	numbers=left,
	numbersep=5pt,
	numberstyle=\tiny\color{black},
	rulecolor=\color{black},
	showlines=true,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	stringstyle=\color{forestgreen},
	tabsize=2,
	title=\lstname,
	upquote=true  % requires textcomp
}

\lstdefinestyle{JavaScript}{
	language=JavaScript,
	style=JSES6Base,
}
\lstdefinestyle{ES6}{
	language=ES6,
	style=JSES6Base
}


%% Bordel pro práci - můžeš smáznout :) 
%%%%%%%%%%%%%%%%%%%

\usepackage{lipsum} %% balíček který píše lipsum (nesmyslný text, který se používá pro kontrolu typografie)

\begin{document}
	
	\pagestyle{empty}
	\pagenumbering{arabic}
	
	\cleardoublepage
%% Titulní stránka s informacemi
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	{\fontfamily{phv}\selectfont
		%% Logo školy
		\begin{figure}[h]
			\centering
			\includegraphics[width=0.6\linewidth]{logo-skola.png}
		\end{figure}
		
		
		%% Hlavička práce a její název (viz proměnná \nazev prace)
		%% \sffamily %%% bezpatkové písmo - sans serif
		{\bfseries %%% písmo na stránce je tučně
			\begin{center}
				\vspace{0.025 \textheight}
				\LARGE{ZÁVĚREČNÁ STUDIJNÍ PRÁCE}\\
				\large{dokumentace}\\
				\vspace{0.075 \textheight}
				\LARGE {\nazevPrace}\\
			\end{center}  
		}%%%

        \begin{figure}[h]
			\centering
			\includegraphics[width=0.8\linewidth]{ndAI.png}
			\label{fig:main-screen}
		\end{figure}

    \vspace{0.02 \textheight}
		\begin{table}[h!]
			\begin{tabular}{ll}
				\textbf{Autor:} & \jmenoAutora\\ 
				\textbf{Obor:} & \kodOboru { } \obor\\
				\textbf{} & \zamereni\\
				\textbf{Třída:} & \trida\\
				\textbf{Školní rok:} & \skolniRok\\
			\end{tabular}
			
		\end{table}		
	}
	
	\clearpage

    
%% Stránka obsahující poděkování a prohlášení
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Poděkování - nepovinné
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	\noindent{\large{\bfseries{Poděkování}\\}}
	\noindent Děkuji všem, co mě psychicky podpořili, když jsem v kódu měl tisíce errorů.
	
	\vspace*{0.7\textheight} %% Vertikální mezeru je možné upravit

%% Prohlášení - povinné
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\noindent{\large{\bfseries{Prohlášení}\\}}  %% uprav si koncovky podle toho na jaký rod se cítíš, vypadá to pak lépe :) 
	\noindent{Prohlašuji, že jsem závěrečnou práci vypracoval samostatně a uvedl veškeré použité 
		informační zdroje.\\}
	\noindent{Souhlasím, aby tato studijní práce byla použita k výukovým a prezentačním účelům na Střední průmyslové a umělecké škole v Opavě, Praskova 399/8.}
	\vfill
	\noindent{V Opavě \datumOdevzdani\\}
	\noindent
	\begin{minipage}{\linewidth}
		\hspace{9.5cm} 
		\begin{tabular}{@{}p{6cm}@{}}
			\dotfill \\
			Podpis autora
		\end{tabular}
	\end{minipage}
	
	\clearpage

	\tableofcontents
	\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
%% Stránka obsahující abstrakt (anotaci)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
\noindent{\Large{\bfseries{Abstrakt}\\}}
Tato práce se zabývá vývojem aplikace pro zpětné testování akcií na základě uživatelsky definovaných parametrů. Aplikace je vyvinuta v jazyce Python s využitím frameworku Django a API SimFin a yfinance, což umožňuje kombinovat historická a aktuální data akcií. Hlavní funkcionality zahrnují analýzu historických dat, výpočet klíčových finančních ukazatelů, vizualizaci výsledků a možnost sdílení portfolií mezi uživateli. Dokumentace popisuje architekturu aplikace, implementační detaily a zvolené metody řešení. Kladen je důraz na přesnost výpočtů, přehlednou vizualizaci dat a uživatelskou přívětivost.

\vspace{18pt}
\noindent{\large{\bfseries{Klíčová slova}}}

\noindent Python, Django, SimFin, yfinance, zpětné testování, finanční analýza, akcie


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
%% Seznam použitých zkratek
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
\chapter*{Seznam použitých zkratek}
\begin{tabular}{ll}
API & Application Programming Interface,\\
EBITDA & Earnings Before Interest, Taxes, Depreciation, and Amortization,\\
EPS & Earnings Per Share,\\
P/E & Price-to-Earnings Ratio,\\
ROE & Return on Equity,\\
REST & Representational State Transfer,\\
SQL & Structured Query Language,\\
UI & User Interface.\\
\end{tabular}

%% Definice příkazu pro podnadpisy v úvodu
\newcommand{\introsubheading}[1]{%
  {\noindent\textbf{\normalsize #1}\vspace{1pt}\par}%
}

\chapter*{ÚVOD}
\addcontentsline{toc}{chapter}{Úvod}

Investování a analýza akciového trhu se v posledních letech stávají stále populárnějšími. S rostoucím zájmem o tuto oblast roste i potřeba nástrojů, které by investorům umožnily lépe pochopit trh, analyzovat historická data a testovat své investiční strategie. Tento projekt byl vytvořen jako aplikace, která kombinuje historická data akcií, finanční ukazatele a vizualizace tak, aby uživatelé mohli získat ucelený přehled o výkonu jednotlivých akcií.

Hlavní funkcionalitou aplikace je integrace dat z API SimFin a yfinance, díky čemuž je možné kombinovat historická a aktuální data. Taky byla přidána i možnost sledovat aktuální ekonomické zprávy, což uživatelům umožňuje získat širší kontext pro rozhodování. Součástí aplikace je rovněž zpětné testování strategií a sdílení portfolií mezi uživateli.

Motivací pro vytvoření této aplikace bylo nejen vyřešit nedostatky stávajících nástrojů, ale také lépe pochopit, jak investiční trh funguje. Tento projekt mi umožnil nejen prohloubit mé technické dovednosti, ale také získat nové znalosti v oblasti investování a finanční analýzy.

\chapter{Teoretická část}

\section{Co je to akcie}
Akcie představuje podíl na vlastnictví společnosti, který držitele opravňuje k účasti na jejím zisku (např. prostřednictvím dividend) a hlasování na valné hromadě. Akciové trhy umožňují obchodování s akciemi, jejichž cena je určována nabídkou a poptávkou. Akcie jsou klíčovým nástrojem pro budování kapitálu jak pro společnosti, tak pro investory.

\subsection{Výhody investování do akcií}
Investování do akcií přináší různé výhody, mezi které patří:
\begin{itemize}
    \item \textbf{Možnost zhodnocení kapitálu:} Dlouhodobé investování do akcií může přinést vyšší výnosy ve srovnání s jinými typy aktiv.
    \item \textbf{Pasivní příjmy:} Prostřednictvím dividend mohou investoři získávat pravidelné příjmy.
    \item \textbf{Diversifikace portfolia:} Akcie umožňují investorům diverzifikovat rizika napříč různými sektory a regiony.
\end{itemize}

\section{Principy zpětného testování akcií}
Zpětné testování (backtesting) je metoda, která simuluje výkonnost investiční strategie na základě historických dat.

\subsection{Hlavní kroky zpětného testování}
\begin{itemize}
    \item \textbf{Výběr historických dat:} Zahrnuje získání dat o cenách akcií, objemech obchodů a finančních ukazatelích.
    \item \textbf{Definování strategie:} Stanovení pravidel pro nákup a prodej akcií.
    \item \textbf{Simulace obchodování:} Aplikace strategie na historická data za účelem analýzy.
    \item \textbf{Vyhodnocení výsledků:} Analýza výnosů, rizik a dalších metrik strategie.
\end{itemize}

\subsection{Výhody zpětného testování}
\begin{itemize}
    \item \textbf{Ověření strategie:} Umožňuje otestovat výkonnost strategie před jejím nasazením do praxe.
    \item \textbf{Identifikace rizik:} Odhaluje slabiny strategie.
    \item \textbf{Optimalizace:} Pomáhá doladit parametry strategie pro lepší výsledky.
\end{itemize}

\section{Databázový model}
Databázový model aplikace je klíčový pro ukládání a správu dat o akciích, uživatelích a jejich portfoliích.

\subsection{Architektura databáze}
Databáze je postavena na relačním modelu s tabulkami propojenými primárními a cizími klíči. Model zahrnuje:
\begin{itemize}
    \item \textbf{Tabulku akcií:} Obsahuje informace o názvu, tickeru, sektoru a dalších vlastnostech.
    \item \textbf{Tabulku historických dat:} Ukládá denní ceny a objemy obchodů.
    \item \textbf{Tabulku portfolií:} Ukládá informace o portfoliích uživatelů a váhách jednotlivých akcií.
\end{itemize}

\subsection{Diagram databázového modelu}
Diagram znázorňuje vztahy mezi tabulkami a poskytuje přehled o struktuře databáze:
\begin{figure}[h]
    \centering
    \includegraphics[width=1\linewidth]{minimal_model.png}
    \caption{ER diagram databázového modelu}
\end{figure}

\section{Historie zpětného testování}
Zpětné testování vzniklo v 70. letech s rozvojem výpočetní techniky. Zpočátku bylo prováděno manuálně, ale s nástupem počítačů a algoritmů se stalo dostupnějším a přesnějším. Dnes umožňuje testovat komplexní strategie na rozsáhlých historických datech.


\chapter{Použité technologie}

Tento projekt byl realizován s využitím moderních technologií a nástrojů, které umožnily efektivní vývoj, správu a testování aplikace. Níže jsou popsány klíčové technologie, které byly při vývoji použity.

\section{Webový framework Django}
Django je robustní a škálovatelný framework pro vývoj webových aplikací v Pythonu. Byl zvolen díky:
\begin{itemize}
    \item \textbf{Modulární architektuře}, která usnadňuje rozšiřitelnost aplikace.
    \item \textbf{Integrovanému ORM (Object-Relational Mapping)}, které umožňuje snadnou práci s databází.
    \item \textbf{Vestavěným nástrojům} pro správu uživatelů, zabezpečení a další základní funkce.
\end{itemize}
Django poskytuje rychlý vývoj, robustní bezpečnostní prvky a čistý kód, což činí aplikaci snadno udržitelnou a rozšiřitelnou.

\section{Databázový systém SQLite}
SQLite je lehký relační databázový systém, který byl zvolen pro tento projekt díky následujícím výhodám:
\begin{itemize}
    \item \textbf{Jednoduché integraci} s Django frameworkem.
    \item \textbf{Nízkým nárokům na údržbu}, jelikož nevyžaduje samostatný databázový server.
    \item \textbf{Přenositelnosti}, což umožňuje snadné sdílení databázových souborů mezi vývojovým a produkčním prostředím.
\end{itemize}

\section{Finanční API}
Pro zajištění přístupu k historickým a aktuálním finančním datům byly použity následující API:

\subsection{SimFin API}
SimFin API poskytuje historické finanční ukazatele a fundamentální data o společnostech. Tato API nám umožnila získávat strukturovaná data o výkonnosti společností, jako jsou tržby, ziskovost, cash flow a další klíčové ukazatele. Využití tohoto API pomohlo efektivně načítat data o akciích pro zpětné testování investičních strategií a pro analýzu trendů v oblasti financí.

\subsection{yFinance API}
yFinance API poskytuje aktuální tržní data o akciích, včetně cen akcií, objemů obchodů, dividendových výnosů a dalších informací. Tato API se ukázala jako cenný nástroj pro získávání živých dat pro analýzu a zobrazení aktuálního stavu trhů.

\subsection{Finnhub API}
Finnhub API poskytuje širokou škálu dat, včetně fundamentálních údajů, historických cen, tržních zpráv a dalších finančních ukazatelů. Tento nástroj byl použit pro získávání podrobných informací o akciových titulech a pro poskytnutí širšího spektra dat pro analýzu výkonnosti a strategické plánování.

\section{Vizualizace dat pomocí Plotly}
Pro vizualizaci finančních dat a výsledků zpětného testování byla použita knihovna \textbf{Plotly}. Tato knihovna umožňuje vytvářet interaktivní grafy a diagramy, které jsou užitečné pro analýzu historických cen akcií, porovnání různých strategií a zobrazení výkonnosti portfolia. Výhody použití Plotly zahrnují:
\begin{itemize}
    \item \textbf{Interaktivitu}, která umožňuje uživatelům snadno zkoumat data kliknutím a přiblížením.
    \item \textbf{Různé typy grafů}, včetně časových řad, histogramů a scatter plotů.
    \item Možnost \textbf{dynamického přizpůsobení grafů} na základě uživatelských preferencí.
\end{itemize}





\chapter{Návrh řešení}

\section{Frontend}

Frontend aplikace je navržen s cílem poskytnout uživatelům přehledné, intuitivní a interaktivní prostředí pro správu jejich portfolií a analýzu akcií. Důraz byl kladen na jednoduchost uživatelského rozhraní, které umožní snadnou navigaci mezi různými funkcemi aplikace.

\subsection{Přihlašování uživatele}

Uživatelé se do aplikace přihlašují pomocí uživatelského jména a hesla. Tento proces je implementován s využitím Django autentizačního systému. Po úspěšném přihlášení uživatel získá přístup ke svému portfoliu, kde může spravovat akcie a jejich váhy.

% Tady bude fotka přihlašovacího formuláře
\begin{figure}[h]
	\centering
	\includegraphics[width=1\linewidth]{login.png}
    \caption{Login}
\end{figure}

\subsection{Sdílení portfolia}

Jednou z klíčových funkcí aplikace je možnost sdílení portfolia mezi uživateli. Uživatel může označit své portfolio jako veřejné, což umožní ostatním uživatelům podívat se na jeho výběr akcií. Tento proces je implementován pomocí tlačítka „Sdílet portfolio“, které mění stav portfolia na veřejný. Po sdílení portfolia je možné získat odkaz pro jeho zobrazení.

% Tady bude fotka sdíleného portfolia
\begin{figure}[h]
	\centering
	\includegraphics[width=1\linewidth]{shared.png}
    \caption{Sdílení portfolií}
\end{figure}

\subsection{Filtr akcií}

Frontend obsahuje filtrování akcií podle různých parametrů, jako je sektor, průmysl, a finanční ukazatele. Filtr se nachází v bočním panelu a umožňuje uživatelům rychle najít akcie, které odpovídají jejich kritériím. Po aplikaci filtrů se výsledky automaticky aktualizují.

% Tady bude fotka filtru akcií
\begin{figure}[h]
	\centering
	\includegraphics[width=1\linewidth]{filter.png}
    \caption{Filtrování akcií}
\end{figure}

\subsection{Vyhledávání akcií}

Vyhledávání akcií je klíčovou funkcí aplikace, která umožňuje uživatelům rychle najít konkrétní akcie podle tickeru nebo názvu společnosti. Po zadání názvu nebo tickeru se na stránce automaticky zobrazí výsledky, které odpovídají zadanému hledanému výrazu.

% Tady bude fotka vyhledávacího pole
\begin{figure}[h]
	\centering
	\includegraphics[width=1\linewidth]{<TADY BUDE FOTKA VYHLEDAVACIH_PODLE_TICKERU>}
\end{figure}

\subsection{Detail akcie}

Stránka s detailem akcie poskytuje uživatelům všechny relevantní informace o konkrétní akcii, včetně historických cen, finančních ukazatelů, grafů a nejnovějších zpráv týkající se dané akcie. Grafy ukazují vývoj vybraných finančních ukazatelů v průběhu času, což pomáhá uživatelům při analýze výkonu akcie.

% Tady bude fotka detailu akcie
\begin{figure}[h]
	\centering
	\includegraphics[width=1\linewidth]{detail1.png}
    \caption{Detail akcie}
\end{figure}

\subsection{Grafy a vizualizace}

Aplikace používá grafy pro zobrazení historických dat akcií, jako jsou ceny, P/E poměr, ROE, a další indikátory. Grafy jsou interaktivní a umožňují uživatelům detailně analyzovat trendy a historické výkony jednotlivých akcií.

% Tady bude fotka grafu
\begin{figure}[h]
	\centering
	\includegraphics[width=1\linewidth]{graf.png}
    \caption{Graf}
\end{figure}

\section{Backend}

Backend aplikace je zodpovědný za správu dat, autentizaci uživatelů, a logiku aplikace. Používá Django jako framework pro vývoj webových aplikací a Python pro zpracování dat.

\subsection{Přihlašování uživatele}

Backend je zodpovědný za autentizaci uživatele pomocí Django autentizačního systému. Po přihlášení je uživatelovi přiřazena relace, která uchovává informace o jeho stavu přihlášení. Kód pro přihlášení uživatele vypadá takto:

\begin{lstlisting}[style=Python, caption= Kód pro přihlášení uživatele]
def signup(request):
    if request.method == 'POST':
        form = CustomUserCreationForm(request.POST)
        if form.is_valid():
            user = form.save()
            login(request, user)
            return redirect('main_page')
    else:
        form = CustomUserCreationForm()
    return render(request, 'signup.html', {'form': form})
\end{lstlisting}

\subsection{Správa portfolií}

Backend umožňuje správu portfolií, která obsahují akcie a jejich váhy. Uživatelé mohou vytvářet nová portfolia, přidávat akcie a měnit jejich váhy. Tento proces je řízen pomocí API, které komunikuje s databází.

\begin{lstlisting}[style=Python, caption= Kód pro správu portfolií]
@login_required
def view_portfolio(request, portfolio_id):
    portfolio = get_object_or_404(Portfolio, id=portfolio_id)
    portfolio_stocks = PortfolioStock.objects.filter(portfolio=portfolio)

    # Výpočet vážené návratnosti portfolia
    avg_return = calculate_portfolio_return(portfolio)

    # Načítání a příprava dat pro graf
    prices_data = {}
    stocks = []
    for stock_item in portfolio_stocks:
        stock = Stock.objects.filter(ticker=stock_item.ticker).first()
        if not stock:
            continue

        share_prices = SharePrices.objects.filter(stock).order_by('date')
        stock_return = None
        if share_prices.exists():
            first_price = share_prices.first().close_price
            last_price = share_prices.last().close_price
            if first_price and last_price and first_price != 0:
        stock_return = ((last_price - first_price) / first_price) * 100

        stocks.append({
            'stock': stock,
            'return': stock_return,
            'weight': stock_item.weight,  # Váha akcie
        })
\end{lstlisting}

\subsection{Filtrace akcií}

Backend poskytuje funkci pro filtrování akcií podle zadaných parametrů. Filtrované výsledky se následně vrátí na frontend a zobrazí uživatelovi.

\begin{lstlisting}[style=Python, caption= Kód pro filtr akcií]
    for f in filters:
        field = f.get('field')
        operator = f.get('operator', 'gte')
        value = f.get('value')

        if field and value:
            try:
                if field in ['sector', 'industry']:
                    q_object &= Q(**{f"{field}__iexact": value})
            else:
                q_object &= Q(**{f"{field}__{operator}": float(value)})
            except (ValueError, TypeError):
                continue
    stocks = Stock.objects.filter(q_object).order_by('-market_cap')
\end{lstlisting}

\subsection{Získávání dat z externích API}

Aplikace získává data o akciích a jejich finančních ukazatelích z externích API, jako je SimFin a yfinance. Backend zajišťuje komunikaci s těmito API, načítání dat a jejich ukládání do databáze. Kód pro načítání dat z API vypadá následovně:

\begin{lstlisting}[style=Python, caption= Kód pro získávání dat z API]
ef load_simfin_data():
    print("Starting to load SimFin data...")

    try:
        # Načtení dat z API SimFin
    income_data = sf.load(dataset='income', variant='annual', market='us', 
    index=['Ticker', 'Fiscal Year'])
    
    balance_data = sf.load(dataset='balance', variant='annual',
    market='us', index=['Ticker', 'Fiscal Year'])
    
    cashflow_data = sf.load(dataset='cashflow', variant='annual',
    market='us', index=['Ticker', 'Fiscal Year'])
    
    shareprices_data = sf.load(dataset='shareprices', variant='daily', 
    market='us', index=['Ticker', 'Date'])

        tickers = income_data.index.get_level_values('Ticker').unique()
\end{lstlisting}

\subsection{Výpočet finančních ukazatelů}

Po získání dat z API backend vypočítá klíčové finanční ukazatele, jako je P/E poměr, ROE, atd. Tyto ukazatele jsou následně uloženy v databázi pro pozdější analýzu.

\begin{lstlisting}[style=Python, caption= Kód pro výpočet finančních ukazatelů]
def calculate_ratios():
    print("Calculating financial ratios...")
    stocks = Stock.objects.all()
    for stock in stocks:
        try:
            # Načtení finančních dat
    income_statement = IncomeStatement.objects.filter(stock=stock)
    balance_sheet = BalanceSheet.objects.filter(stock=stock)
    cash_flow_statement = CashFlowStatement.objects.filter(stock=stock)

    if income_statement and balance_sheet:
    # P/E Ratio
if stock.market_cap and income_statement.net_income 
and income_statement.net_income != 0:
stock.pe_ratio = round(stock.market_cap / income_statement.net_income, 2)
                    ...
\end{lstlisting}

\subsection{Grafy a vizualizace}

Backend zajišťuje generování dat pro grafy, které jsou následně odesílány na frontend. K tomu využívá knihovny jako Matplotlib nebo Plotly pro generování vizualizací.

\begin{lstlisting}[style=Python, caption= Kód pro generování grafů]
def create_price_chart(close_prices):
    dates = [price['date'] for price in close_prices]
    prices = [price['close_price'] for price in close_prices]

    # Vytvoření grafu
    fig, ax = plt.subplots()
    ax.plot(dates, prices, label='Close Price')

    ax.set(xlabel='Date', ylabel='Close Price',
           title='Stock Price Over Time')
    ax.grid()

    buf = BytesIO()
    plt.savefig(buf, format='png')
    buf.seek(0)
    image_base64 = base64.b64encode(buf.getvalue()).decode('utf-8')
    buf.close()

    return image_base64
\end{lstlisting}


\chapter{Závěr a zhodnocení}


\section{Shrnutí výsledků}

Cílem této práce bylo vyvinout aplikaci pro zpětné testování akcií, která umožňuje uživatelům testovat investiční strategie na historických datech a analyzovat výkonnost akcií na základě různých finančních ukazatelů. Po realizaci a testování aplikace lze shrnout následující výsledky:

Aplikace úspěšně integruje dvě klíčová externí API, SimFin a yfinance, která slouží k získávání historických dat a finančních ukazatelů. Mezi těmito ukazateli jsou například P/E, ROE, ROA, a další, které jsou správně vypočítány a uloženy v databázi pro následné použití v analýzách.

Uživatelé mají možnost definovat vlastní investiční strategie a provádět zpětné testování na historických datech, přičemž výsledky jsou generovány a vizualizovány pomocí interaktivních grafů. Tyto grafy zlepšují analýzu a porozumění výsledkům zpětného testování. Uživatelé mohou přidávat akcie do portfolia buď ručně, nebo pomocí filtru, který umožňuje výběr akcií podle různých kritérií.

Dalšími funkcemi aplikace jsou detailní zobrazení akcií, které zahrnuje historické cenové grafy, základní finanční ukazatele, výpočty jako P/E, ROIC, PEG, EPS, a další. V případě, že některé údaje nejsou k dispozici, aplikace správně zobrazuje hodnotu None místo N/A. Uživatelé mohou také přidávat váhy jednotlivým akciím v portfoliu a grafy se automaticky aktualizují podle těchto váh. Navíc je možné přidávat „srdíčko“ k portfoliím, což je jednoduché označení oblíbených portfolií.

Aplikace také umožňuje uživatelům sdílet portfolia, což poskytuje možnost spolupráce a výměny investičních strategií s ostatními uživateli.

Aplikace tedy splňuje své základní cíle a poskytuje funkční nástroj pro zpětné testování akcií a analýzu jejich výkonnosti.


\section{Možnosti budoucího vývoje}


Vzhledem k tomu, že aplikace byla navržena s ohledem na rozšiřitelnost a flexibilitu, existuje několik možností pro její budoucí vylepšení. K těmto možnostem patří:

\begin{itemize}
    \item \textbf{Predikce pomocí AI a strojového učení} – Integrace modelů strojového učení pro predikci budoucího vývoje cen akcií na základě historických dat, klíčových finančních ukazatelů a dalších relevantních faktorů. To by uživatelům pomohlo lépe odhadnout potenciální výnosy a rizika.
    \item \textbf{Kalendář ekonomických událostí} – Přidání interaktivního kalendáře obsahujícího významné ekonomické události, jako jsou zveřejnění výsledků společností, makroekonomická data nebo rozhodnutí centrálních bank. Tato funkcionalita by uživatelům poskytla lepší přehled o možných rizicích a příležitostech.
    \item \textbf{Pokročilé analýzy portfolia} – Zavedení nástrojů pro analýzu portfolia, jako je sledování celkové volatility, Sharpeho poměru nebo dalších ukazatelů, které by pomohly uživatelům optimalizovat jejich investice.
    \item \textbf{Sledování sentimentu trhu} – Možnost analyzovat sentiment trhu pomocí zpracování textů (např. z finančních článků a zpráv). Tato funkcionalita by uživatelům pomohla identifikovat, zda převládá pozitivní, neutrální nebo negativní nálada ohledně konkrétní akcie či trhu obecně.
    \item \textbf{Komunitní diskuse a hodnocení} – Integrované fórum nebo sekce pro komentáře by umožnily uživatelům diskutovat o investičních strategiích, ekonomických událostech nebo konkrétních akciích. Možnost hodnotit portfolia a strategie by dále podpořila interakci mezi uživateli.
\end{itemize}

Aplikace má také potenciál pro komerční využití, zejména pokud bude rozšířena o pokročilé funkce analýzy a optimalizace investičních strategií.

\section{Závěr}

Tato práce se zaměřila na vytvoření aplikace pro zpětné testování akcií, která by poskytovala nástroje pro analýzu akciových trhů na základě historických dat a finančních ukazatelů. Aplikace byla úspěšně navržena, implementována a otestována. Testování prokázalo správnost výpočtů a funkčnost aplikace i při velkém objemu dat.

Díky implementaci flexibilních analytických nástrojů a vizualizací má aplikace vysoký potenciál pro využití v praxi a pro rozšíření o nové funkce v budoucnu. Tento projekt tak představuje silný základ pro další vývoj nástrojů pro analýzu a testování akciových strategií.

 Zdrojový kód projektu je dostupný na GitHubu (https://github.com/Vojtik1/Alfint)

\chapter*{Seznam použitých informačních zdrojů}

\begin{itemize}
    \item \textbf{Django Documentation} – Django Software Foundation. Dostupné z: \url{https://www.djangoproject.com/}
    \item \textbf{yfinance Documentation} – Yahoo Finance API for Python. Dostupné z: \url{https://pypi.org/project/yfinance/}
    \item \textbf{SimFin API Documentation} – SimFin. Dostupné z: \url{https://simfin.com/docs}
    \item \textbf{The Intelligent Investor} – Benjamin Graham, HarperBusiness, 2003.
    \item \textbf{Plotly: A Comprehensive Guide} – Plotly Technologies Inc. Dostupné z: \url{https://plotly.com/python/}
    \item \textbf{ChatGPT} - ChatGPT. Dostupné z: \url{https://chatgpt.com/}
    \item \textbf{Stack Overflow} - Stack Overflow. Dostupné z: \url{https://stackoverflow.com/}
\end{itemize}




\end{document}
